<div class="main">
    <div class="summurize">
        <div class="info">
            <div class="text-and-icon">
                <span class="title">{{project()?.name}}</span>
                <img [src]="`assets/icons/expand_${isExpandProjectHover? 'yes.svg' : 'not.svg'}`"
                    (mouseenter)="isExpandProjectHover = true" (mouseleave)="isExpandProjectHover = false" />
            </div>
            <span class="sub-title">מה זו כותרת משנית?</span>
            <span class="description">
                {{project()?.description}}
            </span>
            <div class="dates">
                <div class="cell date-heaeder">תאריך התחלה</div>
                <div class="cell date-heaeder">תאריך סיום</div>
                <div class="cell date-value">{{project()?.startDate | date: 'dd.MM.yyyy'}}</div>
                <div class="cell date-value">{{project()?.endDate | date: 'dd.MM.yyyy'}}</div>
            </div>
            <div class="update-client">
                <div class="toggle-switch" [class.on]="project()?.updateClient" (click)="updateCient()">
                    <div class="switch-thumb"></div>
                </div>
                <span>הלקוח/ה {{project()?.updateClient? '' : ' לא'}} מקבל/ת עדכונים על התקדמות ושינויים</span>
            </div>
        </div>
        <div class="price">
            <div class="text-and-icon">
                <span class="title">מחיר (לא כולל מע"מ)</span>
                <img class="icon" [src]="'assets/icons/' + (isPriceHover? 'info_yes.svg' : 'info_not.svg')"
                    (mouseenter)="isPriceHover = true" (mouseleave)="isPriceHover = false" matTooltipPosition="above"
                    matTooltipClass="custom-tooltip"
                    matTooltip="אם מחיר הפרויקט משתנה, כל מה שצריך לעשות הוא לשנות את הסכומים בשלבי התשלום (או להוסיף תשלום חדש). המחיר הכולל יתעדכן בהתאם." />
            </div>
            <span class="base-price">{{project()?.basePrice | number}} ₪</span>
            <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="((project()?.paidMoney??0)/(project()?.basePrice??1))*100">
                </div>
            </div>
            <div class="paid-remain">
                <div class="paid">
                    <span class="title">שולם</span>
                    <span class="value">{{project()?.paidMoney | number}} ₪</span>
                </div>
                <div class="remain">
                    <span class="title">נשאר לתשלום</span>
                    <span class="value">{{(project()?.basePrice??0)-(project()?.paidMoney??0) | number}} ₪</span>
                </div>
            </div>
        </div>
        <div class="time">
            <div class=" text-and-icon">
                <span>זמן מצטבר מוערך</span>
                <img class="icon" [src]="'assets/icons/' + (isTimeHover? 'info_yes.svg' : 'info_not.svg')"
                    (mouseenter)="isTimeHover = true" (mouseleave)="isTimeHover = false" matTooltipPosition="above"
                    matTooltipClass="custom-tooltip"
                    matTooltip="השעון הזה מודד את סך הזמן שבו עמוד הפרויקט פתוח, גם אם עברת לעשות דברים אחרים. הוא יכול לתת לך הערכה של זמן העבודה שלך, אם תקפיד/י להשאיר אותו פתוח במקביל לעבודה על הפרויקט ולסגור אותו כשסיימת לעבוד.חשוב: מדובר בהערכה בלבד ולא בשעות מדויקות לצורך חיוב ותשלום." />
            </div>
            <span class="hours">{{((project()?.totalWorkingTime??0)/3600000).toFixed(1)}} שעות</span>
        </div>
    </div>
    <div class="steps">
        <div class="step" [ngClass]="!step.isComplete? 'finished' : 'not-finished'"
            *ngFor="let step of project()?.steps">
            <div class="step-name">
                <span>{{step.name}}</span>
                <div class="icons" *ngIf="!step.isComplete">
                    <img class="icon" [ngClass]="{pointer: !isReadOnly}"
                        (click)="isReadOnly? '' : showDeleteStepModal(step)" src="assets/icons/garbage_can.svg">
                    <img class="icon" [ngClass]="{pointer: !isReadOnly}" (click)="isReadOnly? '' : openStepModal(step)"
                        src="assets/icons/pencil.svg">
                </div>
            </div>
            <div class="confirm">
                <img class="icon" [ngClass]="{pointer: !isReadOnly}" (click)="isReadOnly? '' : changeStepStatus(step)"
                    src="assets/icons/confirm_yes.svg" />
            </div>
        </div>
        <div class="add-step">
            <img (click)="openStepModal()" [src]="'assets/icons/' + (isAddStepHover? 'plus_yes.svg' : 'plus_not.svg')"
                (mouseenter)="isAddStepHover = true" (mouseleave)="isAddStepHover = false" />
        </div>
    </div>
    <div class="notes"></div>
</div>